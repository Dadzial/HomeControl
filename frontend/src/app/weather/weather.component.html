<div class="weather-container" *ngIf="!loading && weather as w; else loadingOrError">
  <h1>Weather</h1>

  <div class="location">
    <mat-icon>location_on</mat-icon>
    <span>{{ w.location.name || 'Pogoda' }}</span>
  </div>

  <div class="weather-display">
    <div class="temp-row">
      <img
        [src]="w.weather.iconUrl"
        [alt]="w.weather.description"
        class="weather-icon"
      />
      <h1>{{ w.temperature.value }}{{ w.temperature.units }}</h1>
    </div>

    <div class="description">{{ w.weather.description }}</div>

    <div class="wind">
      <mat-icon>air</mat-icon>
      <span>{{ w.wind.speed }} {{ w.wind.units }} • {{ w.wind.direction }}</span>
    </div>

    <div class="timestamp">
      {{ w.timestamp | date: 'HH:mm' }} • Update
    </div>

    <button (click)="refreshWeather()" class="refresh-btn">
      <mat-icon>refresh</mat-icon>
      <span>Refresh</span>
    </button>
  </div>
</div>

<ng-template #loadingOrError>
  <div class="weather-container">
    <h1>Weather</h1>

    <div *ngIf="loading" class="loading">
      Loading weather data...
    </div>

    <div *ngIf="!loading && errorMessage" class="error">
      {{ errorMessage }}
    </div>
  </div>
</ng-template>
